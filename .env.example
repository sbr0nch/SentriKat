# SentriKat Environment Configuration
# Copy this file to .env and update the values for your deployment

# ============================================================================
# REQUIRED - Security Keys
# ============================================================================

# SECRET_KEY - Flask session signing key (REQUIRED)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your-secret-key-here-change-in-production

# ENCRYPTION_KEY - Fernet key for encrypting sensitive data (REQUIRED)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-fernet-encryption-key-here

# ============================================================================
# Environment Mode
# ============================================================================

# SENTRIKAT_ENV - Set to 'production' to enable production security features:
# - Disables development license key (SENTRIKAT-DEV-PROFESSIONAL)
# - Future: Additional production-only security checks
SENTRIKAT_ENV=production

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================

# PostgreSQL connection URL
# Format: postgresql://user:password@host:port/database
# IMPORTANT: Change the password below!
DATABASE_URL=postgresql://sentrikat:CHANGE_THIS_PASSWORD@db:5432/sentrikat

# Database password (used by docker-compose for PostgreSQL container)
# IMPORTANT: Must match the password in DATABASE_URL above
DB_PASSWORD=CHANGE_THIS_PASSWORD

# ============================================================================
# Nginx Reverse Proxy Configuration
# ============================================================================

# Server hostname (used in nginx server_name directive)
SERVER_NAME=sentrikat.yourcompany.com

# HTTP/HTTPS ports (change if ports 80/443 are already in use)
HTTP_PORT=80
HTTPS_PORT=443

# Nginx template: nginx.conf.template (HTTP) or nginx-ssl.conf.template (HTTPS)
NGINX_TEMPLATE=nginx.conf.template

# SSL certificate configuration (required when using nginx-ssl.conf.template)
# SSL_CERT_PATH: Directory containing your SSL certificate files
# SSL_CERT_FILE: Certificate file name (default: fullchain.pem)
# SSL_KEY_FILE: Private key file name (default: privkey.pem)
# SSL_CHAIN_FILE: Optional intermediate chain file (if separate from cert)
#
# Option 1: Using fullchain (cert + chain combined)
# SSL_CERT_PATH=/etc/ssl/certs
# SSL_CERT_FILE=fullchain.pem
# SSL_KEY_FILE=privkey.pem
#
# Option 2: Using separate cert and chain files (auto-combined at startup)
# SSL_CERT_PATH=/etc/nginx/ssl
# SSL_CERT_FILE=server.crt
# SSL_KEY_FILE=server.key
# SSL_CHAIN_FILE=chain.pem

# ============================================================================
# Application URL
# ============================================================================

# Public URL for SentriKat (used in email links, webhooks, etc.)
# Should match your SERVER_NAME with the appropriate protocol
SENTRIKAT_URL=https://sentrikat.yourcompany.com

# ============================================================================
# Flask Environment
# ============================================================================

FLASK_ENV=production

# Session cookie security (set to true when using HTTPS)
SESSION_COOKIE_SECURE=true

# Force HTTPS redirects in application
FORCE_HTTPS=true

# ============================================================================
# CISA KEV Sync Schedule
# ============================================================================

# Daily sync time (24-hour format, UTC)
SYNC_HOUR=2
SYNC_MINUTE=0

# ============================================================================
# NVD API (Optional - For CVSS Enrichment & CPE Product Search)
# ============================================================================

# Get your free API key from: https://nvd.nist.gov/developers/request-an-api-key
#
# Rate Limits:
#   Without API key: 5 requests per 30 seconds (slower product searches)
#   With API key:    50 requests per 30 seconds (10x faster)
#
# This key is used for:
#   - Product search in Add Product dialog
#   - CVSS score enrichment during sync
#
# Can also be configured via Administration > Settings > Sync Settings
# NVD_API_KEY=your-nvd-api-key-here

# ============================================================================
# License Configuration (Optional)
# ============================================================================

# Installation ID (IMPORTANT for Docker deployments!)
# This ID uniquely identifies your installation and is required for license activation.
# Generate once and keep forever - do NOT change this value after license activation!
# Generate with: python3 -c "import uuid; print(f'SK-INST-{uuid.uuid4().hex[:32].upper()}')"
SENTRIKAT_INSTALLATION_ID=

# Professional license key for enterprise features:
#   - Unlimited users, organizations, products, agents
#   - LDAP/Active Directory integration
#   - Email alerts and webhooks (Slack/Teams/Discord)
#   - Backup and restore
#   - White-label branding
#   - Priority support
#
# Without a license, SentriKat runs in Demo mode:
#   - 1 user, 1 organization, 50 products, 5 agents
#
# Can also be configured via Administration > License
# The license is auto-synced to the database so the GUI always shows it.
# SENTRIKAT_LICENSE=your-license-key-here

# RSA Public Key for license verification
# If using licenses from portal.sentrikat.com, set this to the portal's public key.
# Option 1: PEM content directly (replace newlines with \n)
# SENTRIKAT_LICENSE_PUBLIC_KEY=-----BEGIN PUBLIC KEY-----\nMIICIjAN...
# Option 2: Path to PEM file
# SENTRIKAT_LICENSE_PUBLIC_KEY_FILE=/path/to/portal_public_key.pem

# ============================================================================
# Proxy Configuration (Optional)
# ============================================================================

# Only needed if behind a corporate proxy
# HTTP_PROXY=http://proxy.yourcompany.com:3128
# HTTPS_PROXY=http://proxy.yourcompany.com:3128
# NO_PROXY=localhost,127.0.0.1,.yourcompany.com

# SSL Certificate Verification (default: true)
# Set to 'false' only for corporate environments with SSL inspection
# VERIFY_SSL=false
